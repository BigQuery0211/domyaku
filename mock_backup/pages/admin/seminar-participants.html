<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>セミナー参加者選択 - domyaku</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="../../assets/css/custom.css" rel="stylesheet">
</head>
<body class="bg-light">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand" href="../index.html">
                <i class="fas fa-chart-line"></i>
                domyaku
            </a>
            
            <div class="navbar-nav ms-auto">
                <div class="dropdown">
                    <a href="#" class="nav-link dropdown-toggle d-flex align-items-center" data-bs-toggle="dropdown">
                        <div class="user-avatar me-2">田</div>
                        <span>田中 管理者</span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#"><i class="fas fa-user me-2"></i>プロフィール</a></li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-cog me-2"></i>設定</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="../auth/login.html"><i class="fas fa-sign-out-alt me-2"></i>ログアウト</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 sidebar">
                <div class="sidebar-content">
                    <nav class="nav flex-column">
                        <a class="nav-link" href="dashboard.html">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>ダッシュボード</span>
                        </a>
                        <a class="nav-link active" href="seminars.html">
                            <i class="fas fa-graduation-cap"></i>
                            <span>セミナー管理</span>
                        </a>
                        <a class="nav-link" href="worksheets.html">
                            <i class="fas fa-file-alt"></i>
                            <span>ワークシート</span>
                        </a>
                        <a class="nav-link" href="user-management.html">
                            <i class="fas fa-users"></i>
                            <span>ユーザー管理</span>
                        </a>
                        <a class="nav-link" href="reports.html">
                            <i class="fas fa-chart-bar"></i>
                            <span>レポート</span>
                        </a>
                    </nav>
                </div>
            </div>

            <!-- Main Content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 main-content">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">
                        <i class="fas fa-users me-2"></i>
                        セミナー参加者選択
                    </h1>
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="dashboard.html">ダッシュボード</a></li>
                            <li class="breadcrumb-item"><a href="seminars.html">セミナー管理</a></li>
                            <li class="breadcrumb-item"><a href="seminar-detail.html">プログラミング基礎セミナー</a></li>
                            <li class="breadcrumb-item active">参加者選択</li>
                        </ol>
                    </nav>
                </div>

                <!-- セミナー情報 -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card border-primary">
                            <div class="card-header bg-primary text-white">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-graduation-cap me-2"></i>
                                    セミナー情報
                                </h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-8">
                                        <h5 class="fw-bold">プログラミング基礎セミナー</h5>
                                        <p class="text-muted mb-2">
                                            <i class="fas fa-calendar me-1"></i>
                                            2025年9月15日 13:00 - 17:00
                                        </p>
                                        <p class="text-muted mb-0">
                                            <i class="fas fa-map-marker-alt me-1"></i>
                                            オンライン（Zoom）
                                        </p>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="text-end">
                                            <div class="stat-number">12</div>
                                            <div class="stat-label">現在の参加者数</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 参加者選択フォーム -->
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="card-title mb-0">
                                    <i class="fas fa-user-check me-2"></i>
                                    参加者選択
                                </h5>
                                <div class="d-flex gap-2">
                                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="selectAll()">
                                        <i class="fas fa-check-double me-1"></i>全選択
                                    </button>
                                    <button type="button" class="btn btn-outline-secondary btn-sm" onclick="clearAll()">
                                        <i class="fas fa-times me-1"></i>全解除
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <!-- 検索・フィルター -->
                                <div class="row mb-4">
                                    <div class="col-md-6">
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fas fa-search"></i>
                                            </span>
                                            <input type="text" class="form-control" placeholder="名前またはメールアドレスで検索...">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <select class="form-select">
                                            <option value="">部署を選択</option>
                                            <option value="engineering">エンジニアリング部</option>
                                            <option value="sales">営業部</option>
                                            <option value="marketing">マーケティング部</option>
                                            <option value="hr">人事部</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <select class="form-select">
                                            <option value="">ステータス</option>
                                            <option value="active">アクティブ</option>
                                            <option value="invited">招待済み</option>
                                            <option value="inactive">非アクティブ</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- ユーザー一覧 -->
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead class="table-light">
                                            <tr>
                                                <th width="50">
                                                    <input type="checkbox" class="form-check-input" id="selectAllCheckbox">
                                                </th>
                                                <th>ユーザー</th>
                                                <th>部署</th>
                                                <th>ステータス</th>
                                                <th>最終ログイン</th>
                                                <th>参加セミナー数</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <input type="checkbox" class="form-check-input user-checkbox" checked>
                                                </td>
                                                <td>
                                                    <div class="d-flex align-items-center">
                                                        <div class="user-avatar me-3">佐</div>
                                                        <div>
                                                            <div class="fw-semibold">佐藤 太郎</div>
                                                            <div class="text-muted small">sato.taro@example.com</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>エンジニアリング部</td>
                                                <td><span class="badge bg-success">アクティブ</span></td>
                                                <td>2025年8月29日</td>
                                                <td>3</td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <input type="checkbox" class="form-check-input user-checkbox" checked>
                                                </td>
                                                <td>
                                                    <div class="d-flex align-items-center">
                                                        <div class="user-avatar me-3">田</div>
                                                        <div>
                                                            <div class="fw-semibold">田中 花子</div>
                                                            <div class="text-muted small">tanaka.hanako@example.com</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>マーケティング部</td>
                                                <td><span class="badge bg-success">アクティブ</span></td>
                                                <td>2025年8月30日</td>
                                                <td>5</td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <input type="checkbox" class="form-check-input user-checkbox">
                                                </td>
                                                <td>
                                                    <div class="d-flex align-items-center">
                                                        <div class="user-avatar me-3">山</div>
                                                        <div>
                                                            <div class="fw-semibold">山田 次郎</div>
                                                            <div class="text-muted small">yamada.jiro@example.com</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>営業部</td>
                                                <td><span class="badge bg-warning">招待済み</span></td>
                                                <td>-</td>
                                                <td>0</td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <input type="checkbox" class="form-check-input user-checkbox" checked>
                                                </td>
                                                <td>
                                                    <div class="d-flex align-items-center">
                                                        <div class="user-avatar me-3">鈴</div>
                                                        <div>
                                                            <div class="fw-semibold">鈴木 美咲</div>
                                                            <div class="text-muted small">suzuki.misaki@gmail.com</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>人事部</td>
                                                <td><span class="badge bg-success">アクティブ</span></td>
                                                <td>2025年8月28日</td>
                                                <td>2</td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <input type="checkbox" class="form-check-input user-checkbox" checked>
                                                </td>
                                                <td>
                                                    <div class="d-flex align-items-center">
                                                        <div class="user-avatar me-3">高</div>
                                                        <div>
                                                            <div class="fw-semibold">高橋 健一</div>
                                                            <div class="text-muted small">takahashi.kenichi@yahoo.co.jp</div>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td>エンジニアリング部</td>
                                                <td><span class="badge bg-success">アクティブ</span></td>
                                                <td>2025年8月30日</td>
                                                <td>4</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <!-- 選択状況サマリー -->
                                <div class="alert alert-info mt-3">
                                    <div class="row align-items-center">
                                        <div class="col-md-8">
                                            <i class="fas fa-info-circle me-2"></i>
                                            <strong>選択状況:</strong> 
                                            <span id="selectedCount">4</span>名が選択されています
                                            （招待済みユーザー: <span id="invitedCount">1</span>名を含む）
                                        </div>
                                        <div class="col-md-4 text-end">
                                            <button type="button" class="btn btn-outline-info btn-sm" data-bs-toggle="modal" data-bs-target="#previewModal">
                                                <i class="fas fa-eye me-1"></i>招待プレビュー
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- アクションボタン -->
                                <div class="d-flex justify-content-between align-items-center mt-4">
                                    <a href="seminar-detail.html" class="btn btn-outline-secondary">
                                        <i class="fas fa-arrow-left me-1"></i>戻る
                                    </a>
                                    <div class="d-flex gap-2">
                                        <button type="button" class="btn btn-success" onclick="saveParticipants()">
                                            <i class="fas fa-save me-1"></i>参加者を保存
                                        </button>
                                        <button type="button" class="btn btn-primary" onclick="saveAndNotify()">
                                            <i class="fas fa-envelope me-1"></i>保存して通知送信
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- 招待プレビューモーダル -->
    <div class="modal fade" id="previewModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-envelope me-2"></i>
                        招待メールプレビュー
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="card">
                        <div class="card-header bg-light">
                            <h6 class="mb-0">送信対象</h6>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <strong>新規招待:</strong> 1名
                                    <ul class="mt-2">
                                        <li>山田 次郎 (yamada.jiro@example.com)</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <strong>参加確認:</strong> 3名
                                    <ul class="mt-2">
                                        <li>佐藤 太郎</li>
                                        <li>田中 花子</li>
                                        <li>鈴木 美咲</li>
                                        <li>高橋 健一</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card mt-3">
                        <div class="card-header bg-light">
                            <h6 class="mb-0">メール内容（新規招待）</h6>
                        </div>
                        <div class="card-body">
                            <div class="bg-light p-3 rounded">
                                <strong>件名:</strong> 【domyaku】セミナーへの招待<br><br>
                                <strong>本文:</strong><br>
                                山田 次郎様<br><br>
                                「プログラミング基礎セミナー」への参加招待をお送りします。<br><br>
                                <strong>セミナー詳細:</strong><br>
                                • 日時: 2025年9月15日 13:00 - 17:00<br>
                                • 形式: オンライン（Zoom）<br>
                                • 参加方法: 下記URLからアカウントを作成してください<br><br>
                                ▼参加登録はこちら<br>
                                https://domyaku.example.com/signup?invite=ABC123<br><br>
                                ご質問がございましたら、お気軽にお問い合わせください。<br><br>
                                株式会社サンプル<br>
                                田中 管理者
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">閉じる</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/mock-behavior.js"></script>
    <script>
        // 全選択・全解除機能
        function selectAll() {
            document.querySelectorAll('.user-checkbox').forEach(checkbox => {
                checkbox.checked = true;
            });
            updateSelectedCount();
        }

        function clearAll() {
            document.querySelectorAll('.user-checkbox').forEach(checkbox => {
                checkbox.checked = false;
            });
            updateSelectedCount();
        }

        // 選択数更新
        function updateSelectedCount() {
            const selected = document.querySelectorAll('.user-checkbox:checked').length;
            document.getElementById('selectedCount').textContent = selected;
        }

        // 参加者保存
        function saveParticipants() {
            const selected = document.querySelectorAll('.user-checkbox:checked').length;
            if (selected === 0) {
                alert('参加者を選択してください。');
                return;
            }
            alert(`${selected}名の参加者を保存しました。`);
        }

        // 保存して通知送信
        function saveAndNotify() {
            const selected = document.querySelectorAll('.user-checkbox:checked').length;
            if (selected === 0) {
                alert('参加者を選択してください。');
                return;
            }
            alert(`${selected}名の参加者を保存し、招待・確認メールを送信しました。`);
        }

        // チェックボックス変更時の処理
        document.addEventListener('DOMContentLoaded', function() {
            const checkboxes = document.querySelectorAll('.user-checkbox');
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', updateSelectedCount);
            });
            
            updateSelectedCount();
        });
    </script>
</body>
</html>
