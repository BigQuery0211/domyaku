<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ワークシート回答 - セミナーシステム</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="../../assets/css/custom.css" rel="stylesheet">
</head>
<body>
    <!-- ヘッダー -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="dashboard.html">
                <i class="fas fa-graduation-cap me-2"></i>セミナーシステム
            </a>
            
            <div class="navbar-nav me-auto">
                <span class="navbar-text">
                    <i class="fas fa-file-alt me-2"></i>新人研修2025 - ワークシート3
                </span>
            </div>
            
            <div class="navbar-nav">
                <div class="nav-item">
                    <span class="navbar-text">
                        <i class="fas fa-clock me-1"></i>自動保存済み
                        <span class="autosave-indicator ms-2"></span>
                    </span>
                </div>
                <div class="nav-item ms-3">
                    <a class="nav-link" href="dashboard.html">
                        <i class="fas fa-home me-1"></i>ダッシュボード
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- サイドバー -->
            <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar">
                <div class="position-sticky pt-3">
                    <!-- モックナビゲーション -->
                    <div class="mb-3">
                        <a href="../../index.html" class="btn btn-outline-secondary btn-sm w-100">
                            <i class="fas fa-arrow-left me-1"></i>モック一覧に戻る
                        </a>
                    </div>

                    <!-- 進捗表示 -->
                    <div class="card mb-3">
                        <div class="card-header">
                            <h6 class="card-title mb-0">
                                <i class="fas fa-chart-pie me-2"></i>回答進捗
                            </h6>
                        </div>
                        <div class="card-body">
                            <div class="text-center mb-2">
                                <div class="stat-number text-primary">65%</div>
                                <div class="stat-label">完了</div>
                            </div>
                            <div class="progress mb-2">
                                <div class="progress-bar" style="width: 65%"></div>
                            </div>
                            <small class="text-muted">13/20 質問完了</small>
                        </div>
                    </div>

                    <!-- セクション一覧 -->
                    <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>セクション</span>
                    </h6>
                    <ul class="nav flex-column mb-2">
                        <li class="nav-item">
                            <a class="nav-link" href="#section1" onclick="scrollToSection('section1')">
                                <i class="fas fa-check-circle me-2 text-success"></i>
                                基本情報
                                <small class="d-block text-muted">完了</small>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="#section2" onclick="scrollToSection('section2')">
                                <i class="fas fa-edit me-2 text-warning"></i>
                                目標設定
                                <small class="d-block text-muted">進行中</small>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#section3" onclick="scrollToSection('section3')">
                                <i class="fas fa-circle me-2 text-secondary"></i>
                                自己評価
                                <small class="d-block text-muted">未着手</small>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#section4" onclick="scrollToSection('section4')">
                                <i class="fas fa-circle me-2 text-secondary"></i>
                                今後の計画
                                <small class="d-block text-muted">未着手</small>
                            </a>
                        </li>
                    </ul>

                    <!-- アクションボタン -->
                    <div class="d-grid gap-2 mt-3">
                        <button type="button" class="btn btn-success" onclick="submitWorksheet()">
                            <i class="fas fa-paper-plane me-2"></i>提出
                        </button>
                        <button type="button" class="btn btn-outline-primary" onclick="saveWorksheet()">
                            <i class="fas fa-save me-2"></i>保存
                        </button>
                        <button type="button" class="btn btn-outline-secondary" onclick="window.history.back()">
                            <i class="fas fa-arrow-left me-2"></i>戻る
                        </button>
                    </div>
                </div>
            </nav>

            <!-- メインコンテンツ -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">
                        <i class="fas fa-file-alt me-2"></i>目標設定と自己評価
                    </h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <small class="text-muted">
                            <i class="fas fa-clock me-1"></i>締切: 2025年9月2日 17:00
                        </small>
                    </div>
                </div>

                <!-- ワークシート説明 -->
                <div class="alert alert-info mb-4">
                    <h5 class="alert-heading">
                        <i class="fas fa-info-circle me-2"></i>このワークシートについて
                    </h5>
                    <p>このワークシートでは、研修を通じての目標設定と現在の自己評価について質問します。</p>
                    <hr>
                    <p class="mb-0">
                        <i class="fas fa-lightbulb me-1"></i>
                        <strong>ヒント:</strong> 正直に、具体的に回答してください。回答は自動保存されます。
                    </p>
                </div>

                <!-- 質問フォーム -->
                <form id="worksheetForm">
                    <!-- セクション1: 基本情報 -->
                    <div class="answer-section" id="section1">
                        <div class="section-divider">
                            <h3>
                                <i class="fas fa-user me-2"></i>基本情報
                                <span class="badge bg-success ms-2">完了</span>
                            </h3>
                        </div>

                        <!-- 質問1: テキスト入力 -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">
                                1. お名前を入力してください <span class="text-danger">*</span>
                            </label>
                            <div class="form-text text-muted mb-2">
                                <i class="fas fa-info-circle me-1"></i>フルネームで入力してください（補足：姓名の間にスペースを入れる必要はありません）
                            </div>
                            <input type="text" 
                                   class="form-control" 
                                   name="name" 
                                   value="田中太郎"
                                   data-autosave
                                   required>
                        </div>

                        <!-- 質問2: 単一選択 -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">
                                2. 所属部署を選択してください <span class="text-danger">*</span>
                            </label>
                            <div class="form-text text-muted mb-2">
                                <i class="fas fa-info-circle me-1"></i>現在所属している部署をお選びください（該当がない場合は「その他」を選択）
                            </div>
                            <div class="mt-2">
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="department" value="sales" id="dept1" checked data-autosave>
                                    <label class="form-check-label" for="dept1">営業部</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="department" value="engineering" id="dept2" data-autosave>
                                    <label class="form-check-label" for="dept2">技術部</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="department" value="hr" id="dept3" data-autosave>
                                    <label class="form-check-label" for="dept3">人事部</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="department" value="other" id="dept4" data-autosave>
                                    <label class="form-check-label" for="dept4">その他</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- セクション2: 目標設定 -->
                    <div class="answer-section" id="section2">
                        <div class="section-divider">
                            <h3>
                                <i class="fas fa-target me-2"></i>目標設定
                                <span class="badge bg-warning ms-2">進行中</span>
                            </h3>
                        </div>

                        <!-- 質問3: 長文入力 -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">
                                3. この研修を通じて達成したい目標を具体的に記述してください <span class="text-danger">*</span>
                            </label>
                            <textarea class="form-control" 
                                      name="goals" 
                                      rows="5" 
                                      data-autosave
                                      placeholder="例：営業スキルを向上させ、月間売上目標を20%向上させたい..."
                                      required>コミュニケーション能力を向上させ、顧客との信頼関係を築けるようになりたい。特に、ヒアリング力と提案力を重点的に伸ばし、成約率を現在の15%から25%まで向上させることを目標とする。</textarea>
                            <div class="form-text">
                                <i class="fas fa-info-circle me-1"></i>具体的な数値目標があれば含めてください（最低200文字）
                            </div>
                        </div>

                        <!-- 質問4: 複数選択 -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">
                                4. 重点的に学びたいスキルを選択してください（複数選択可） <span class="text-danger">*</span>
                            </label>
                            <div class="mt-2">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="skills" value="communication" id="skill1" checked data-autosave>
                                    <label class="form-check-label" for="skill1">コミュニケーション</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="skills" value="presentation" id="skill2" checked data-autosave>
                                    <label class="form-check-label" for="skill2">プレゼンテーション</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="skills" value="negotiation" id="skill3" data-autosave>
                                    <label class="form-check-label" for="skill3">交渉術</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="skills" value="time_management" id="skill4" data-autosave>
                                    <label class="form-check-label" for="skill4">時間管理</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="skills" value="leadership" id="skill5" data-autosave>
                                    <label class="form-check-label" for="skill5">リーダーシップ</label>
                                </div>
                            </div>
                        </div>

                        <!-- 質問5: 評価スケール -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">
                                5. 現在のコミュニケーション能力を10段階で評価してください <span class="text-danger">*</span>
                            </label>
                            <div class="question-scale mt-3">
                                <div class="scale-option">
                                    <input type="radio" name="communication_level" value="1" id="comm1" data-autosave>
                                    <label for="comm1">1</label>
                                    <small>低い</small>
                                </div>
                                <div class="scale-option">
                                    <input type="radio" name="communication_level" value="2" id="comm2" data-autosave>
                                    <label for="comm2">2</label>
                                </div>
                                <div class="scale-option">
                                    <input type="radio" name="communication_level" value="3" id="comm3" data-autosave>
                                    <label for="comm3">3</label>
                                </div>
                                <div class="scale-option">
                                    <input type="radio" name="communication_level" value="4" id="comm4" data-autosave>
                                    <label for="comm4">4</label>
                                </div>
                                <div class="scale-option">
                                    <input type="radio" name="communication_level" value="5" id="comm5" data-autosave>
                                    <label for="comm5">5</label>
                                </div>
                                <div class="scale-option">
                                    <input type="radio" name="communication_level" value="6" id="comm6" checked data-autosave>
                                    <label for="comm6">6</label>
                                </div>
                                <div class="scale-option">
                                    <input type="radio" name="communication_level" value="7" id="comm7" data-autosave>
                                    <label for="comm7">7</label>
                                </div>
                                <div class="scale-option">
                                    <input type="radio" name="communication_level" value="8" id="comm8" data-autosave>
                                    <label for="comm8">8</label>
                                </div>
                                <div class="scale-option">
                                    <input type="radio" name="communication_level" value="9" id="comm9" data-autosave>
                                    <label for="comm9">9</label>
                                </div>
                                <div class="scale-option">
                                    <input type="radio" name="communication_level" value="10" id="comm10" data-autosave>
                                    <label for="comm10">10</label>
                                    <small>高い</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- セクション3: 自己評価 -->
                    <div class="answer-section" id="section3">
                        <div class="section-divider">
                            <h3>
                                <i class="fas fa-star me-2"></i>自己評価
                                <span class="badge bg-secondary ms-2">未着手</span>
                            </h3>
                        </div>

                        <!-- 質問6: 長文入力 -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">
                                6. 現在の強みと改善点について記述してください
                            </label>
                            <textarea class="form-control" 
                                      name="self_evaluation" 
                                      rows="4" 
                                      data-autosave
                                      placeholder="強み：例えば、積極的に質問する姿勢がある
改善点：例えば、論理的な説明力が不足している"></textarea>
                            <div class="form-text">
                                <i class="fas fa-info-circle me-1"></i>強みと改善点をそれぞれ記述してください
                            </div>
                        </div>

                        <!-- 質問7: 複数の評価スケール -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">
                                7. 以下の項目について現在のレベルを評価してください <span class="text-danger">*</span>
                            </label>
                            
                            <div class="row mt-3">
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-body">
                                            <h6>プレゼンテーション能力</h6>
                                            <div class="question-scale">
                                                <div class="scale-option">
                                                    <input type="radio" name="presentation_skill" value="1" id="pres1" data-autosave>
                                                    <label for="pres1">1</label>
                                                </div>
                                                <div class="scale-option">
                                                    <input type="radio" name="presentation_skill" value="2" id="pres2" data-autosave>
                                                    <label for="pres2">2</label>
                                                </div>
                                                <div class="scale-option">
                                                    <input type="radio" name="presentation_skill" value="3" id="pres3" data-autosave>
                                                    <label for="pres3">3</label>
                                                </div>
                                                <div class="scale-option">
                                                    <input type="radio" name="presentation_skill" value="4" id="pres4" data-autosave>
                                                    <label for="pres4">4</label>
                                                </div>
                                                <div class="scale-option">
                                                    <input type="radio" name="presentation_skill" value="5" id="pres5" data-autosave>
                                                    <label for="pres5">5</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-body">
                                            <h6>チームワーク</h6>
                                            <div class="question-scale">
                                                <div class="scale-option">
                                                    <input type="radio" name="teamwork_skill" value="1" id="team1" data-autosave>
                                                    <label for="team1">1</label>
                                                </div>
                                                <div class="scale-option">
                                                    <input type="radio" name="teamwork_skill" value="2" id="team2" data-autosave>
                                                    <label for="team2">2</label>
                                                </div>
                                                <div class="scale-option">
                                                    <input type="radio" name="teamwork_skill" value="3" id="team3" data-autosave>
                                                    <label for="team3">3</label>
                                                </div>
                                                <div class="scale-option">
                                                    <input type="radio" name="teamwork_skill" value="4" id="team4" data-autosave>
                                                    <label for="team4">4</label>
                                                </div>
                                                <div class="scale-option">
                                                    <input type="radio" name="teamwork_skill" value="5" id="team5" data-autosave>
                                                    <label for="team5">5</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- セクション4: 今後の計画 -->
                    <div class="answer-section" id="section4">
                        <div class="section-divider">
                            <h3>
                                <i class="fas fa-calendar-alt me-2"></i>今後の計画
                                <span class="badge bg-secondary ms-2">未着手</span>
                            </h3>
                        </div>

                        <!-- 質問8: 長文入力 -->
                        <div class="mb-4">
                            <label class="form-label fw-bold">
                                8. 研修終了後の具体的な行動計画を記述してください
                            </label>
                            <textarea class="form-control" 
                                      name="action_plan" 
                                      rows="5" 
                                      data-autosave
                                      placeholder="例：毎週1回のロールプレイング練習を実施し、1ヶ月後に上司にフィードバックをもらう..."></textarea>
                        </div>
                    </div>

                    <!-- 送信ボタン -->
                    <div class="text-center mt-5 mb-4">
                        <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                            <button type="button" class="btn btn-outline-secondary me-md-2" onclick="window.history.back()">
                                <i class="fas fa-arrow-left me-2"></i>戻る
                            </button>
                            <button type="button" class="btn btn-primary me-md-2" onclick="saveWorksheet()">
                                <i class="fas fa-save me-2"></i>保存
                            </button>
                            <button type="button" class="btn btn-success" onclick="submitWorksheet()">
                                <i class="fas fa-paper-plane me-2"></i>提出
                            </button>
                        </div>
                        <small class="text-muted mt-2 d-block">
                            <i class="fas fa-info-circle me-1"></i>
                            提出後は回答の変更ができませんので、ご注意ください
                        </small>
                    </div>
                </form>
            </main>
        </div>
    </div>

    <!-- 提出確認モーダル -->
    <div class="modal fade" id="submitModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-paper-plane me-2"></i>ワークシート提出確認
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>注意:</strong> 提出後は回答の変更ができません。
                    </div>
                    <p>以下の内容で提出しますか？</p>
                    <ul>
                        <li>回答進捗: <strong>65%</strong></li>
                        <li>必須項目: <strong>未回答があります</strong></li>
                        <li>最終保存: <strong>ただいま</strong></li>
                    </ul>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
                    <button type="button" class="btn btn-success" onclick="confirmSubmit()">
                        提出する
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../assets/js/mock-behavior.js"></script>
    <script>
        function scrollToSection(sectionId) {
            document.getElementById(sectionId).scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }

        function saveWorksheet() {
            showLoading(event.target);
            setTimeout(() => {
                hideLoading(event.target);
                showToast('success', 'ワークシートを保存しました');
                document.querySelector('.autosave-indicator').innerHTML = 
                    '<i class="fas fa-save text-success me-1"></i>保存済み';
            }, 1000);
        }

        function submitWorksheet() {
            const modal = new bootstrap.Modal(document.getElementById('submitModal'));
            modal.show();
        }

        function confirmSubmit() {
            bootstrap.Modal.getInstance(document.getElementById('submitModal')).hide();
            
            // 提出処理のモック
            showToast('success', 'ワークシートを提出しました');
            setTimeout(() => {
                window.location.href = 'dashboard.html';
            }, 2000);
        }

        // ページロード時の処理
        document.addEventListener('DOMContentLoaded', function() {
            // スクロール位置に応じてサイドバーのアクティブリンクを更新
            window.addEventListener('scroll', function() {
                const sections = document.querySelectorAll('.answer-section');
                const navLinks = document.querySelectorAll('.sidebar .nav-link');
                
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    const sectionHeight = section.clientHeight;
                    if (window.pageYOffset >= sectionTop - 200) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === '#' + current) {
                        link.classList.add('active');
                    }
                });
            });

            // 進捗の動的更新
            updateProgress();
        });

        function updateProgress() {
            const totalQuestions = 8;
            const answeredQuestions = 5; // モックデータ
            const percentage = Math.round((answeredQuestions / totalQuestions) * 100);
            
            const progressBar = document.querySelector('.progress-bar');
            const progressText = document.querySelector('.stat-number');
            const progressDetail = document.querySelector('.stat-label').nextElementSibling;
            
            if (progressBar) {
                progressBar.style.width = percentage + '%';
                progressText.textContent = percentage + '%';
                progressDetail.textContent = `${answeredQuestions}/${totalQuestions} 質問完了`;
            }
        }
    </script>
</body>
</html>
